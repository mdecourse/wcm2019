<!doctype html>
<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>WCM2019</title> <link rel="stylesheet" type="text/css" href="./../static/cmsimply.css">
<script src="tipuesearch_content.js"></script>
<script src="./../static/jquery.js"></script>
<link rel="stylesheet" href="./../static/tipuesearch/css/tipuesearch.css">
<script src="./../static/tipuesearch/tipuesearch_set.js"></script>
<script src="./../static/tipuesearch/tipuesearch.min.js"></script>

<script type="text/javascript" src="./../static/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCSharp.js"></script>
<link type="text/css" rel="stylesheet" href="./../static/syntaxhighlighter/css/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>

<!-- for LaTeX equations 暫時不用
<script src="https://scrum-3.github.io/web/math/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>
<script type="text/javascript">
init_mathjax = function() {
    if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'left', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>
-->
<!-- 暫時不用
<script src="./../static/fengari-web.js"></script>
<script type="text/javascript" src="./../static/Cango-13v08-min.js"></script>
<script type="text/javascript" src="./../static/CangoAxes-4v01-min.js"></script>
<script type="text/javascript" src="./../static/gearUtils-05.js"></script>
-->
<!-- for Brython 暫時不用
<script src="https://scrum-3.github.io/web/brython/brython.js"></script>
<script src="https://scrum-3.github.io/web/brython/brython_stdlib.js"></script>
-->
<style>
img.with_border {
    border: 3px solid red;
}
</style>

<script type="text/javascript">
/*shorthand of $(document).ready(function(){};); */
$(function(){
    $("ul.topmenu> li:has(ul) > a").append('<div class="arrow-right"></div>');
    $("ul.topmenu > li ul li:has(ul) > a").append('<div class="arrow-right"></div>');
});
function doSearch() {
     $('#tipue_search_input').tipuesearch({
        newWindow: true, minimumLength: 2
     });
}
$(document).ready(doSearch);
</script>

</head><header><h1>2019 Spring 網際內容管理</h1> <confmenu>
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="sitemap.html">Site Map</a></li>
<li><a href="./../reveal/index.html">reveal</a></li>
<li><a href="./../blog/index.html">blog</a></li>

</ul>
</confmenu></header>
<div class='container'><nav><ul id='css3menu1' class='topmenu'><div class="tipue_search_group"><input style="width: 6vw;" type="text" name="q" id="tipue_search_input" pattern=".{2,}" title="Press enter key to search" required></div><li><a href='Introduction.html'>Introduction</a><ul><li><a href='P-Tech.html'>P-Tech</a><li><a href='C-K and future job.html'>C-K and future job</a><li><a href='計算機程式.html'>計算機程式</a><li><a href='全球協同.html'>全球協同</a></li></ul><li><a href='實習任務.html'>實習任務</a><ul><li><a href='實習任務一.html'>實習任務一</a><ul><li><a href='task1 Q&A.html'>task1 Q&A</a></li></ul><li><a href='實習項目二.html'>實習項目二</a><ul><li><a href='Git 設定.html'>Git 設定</a><li><a href='Blogger API.html'>Blogger API</a><li><a href='Blogger API 應用.html'>Blogger API 應用</a></li></ul><li><a href='實習項目三.html'>實習項目三</a><ul><li><a href='game1.html'>game1</a><li><a href='canvas1.html'>canvas1</a><li><a href='Spur Gear1.html'>Spur Gear1</a><li><a href='Cango Library.html'>Cango Library</a></li></ul><li><a href='實習項目四.html'>實習項目四</a><li><a href='實習項目五.html'>實習項目五</a></li></ul><li><a href='分組專題.html'>分組專題</a><ul><li><a href='電腦安裝.html'>電腦安裝</a><ul><li><a href='建立伺服器.html'>建立伺服器</a></li></ul><li><a href='網路配置.html'>網路配置</a><ul><li><a href='Proxy Server.html'>Proxy Server</a></li></li></ul></ul><li><a href='程式開發環境.html'>程式開發環境</a><ul><li><a href='Windows 10.html'>Windows 10</a><li><a href='Ubuntu.html'>Ubuntu</a><li><a href='CentOS.html'>CentOS</a></li></ul><li><a href='CMSimfly 安裝.html'>CMSimfly 安裝</a><ul><li><a href='Github.html'>Github</a><li><a href='Heroku.html'>Heroku</a><li><a href='自架主機.html'>自架主機</a></li></ul><li><a href='CMSimfly 開發.html'>CMSimfly 開發</a><ul><li><a href='Front-end.html'>Front-end</a><li><a href='繪圖.html'>繪圖</a></li></ul><li><a href='相關技術.html'>相關技術</a><ul><li><a href='Pygrouf.html'>Pygrouf</a><li><a href='Konva.html'>Konva</a><li><a href='X3d.html'>X3d</a><li><a href='Wagtail.html'>Wagtail</a><li><a href='Fossil SCM.html'>Fossil SCM</a><ul><li><a href='文件檔案管理.html'>文件檔案管理</a></li></li></ul></ul><li><a href='參考資料.html'>參考資料</a></li></ul></nav><section><div id="tipue_search_content">Pygrouf << <a href='Pygrouf.html'>Previous</a> <a href='X3d.html'>Next</a> >> X3d<br /><h1>Konva</h1>
<p>直接利用 Konva 與 Javascript 繪圖</p>
<p><a href="https://konvajs.github.io/">https://konvajs.github.io/</a> </p>
<h4>What is Konva.JS for?</h4>
<p>Konva.JS is a JavaScript library used to work with HTML5 canvas. A canvas element is sort of what it sounds like...a place to draw stuff. Most of the time, web pages that create customizable images for you to download--memes, avatars, graphs, etc.--are using a canvas element. Unfortunately, doing anything beyond simple drawings on the canvas can be a royal pain in the rump. But fortunately, some highly skilled programmers have written libraries of JavaScript functions to do the hard parts for us. There are many such libraries for the canvas, and Konva.JS is probably the most popular.</p>
<p>Source: <a href="https://docs.google.com/presentation/d/1IOCbk5xL_QjPaM5DqybMWLKRZCV8kxAbqNWwDX7Rj5M/htmlpresent">https://docs.google.com/presentation/d/1IOCbk5xL_QjPaM5DqybMWLKRZCV8kxAbqNWwDX7Rj5M/htmlpresent</a> </p>
<h4>Step 1: Load the Konva.JS library</h4>
<p>HTML</p>
<p>&lt;script src="https://cdn.rawgit.com/konvajs/konva/0.11.1/konva.min.js"&gt;&lt;/script&gt;</p>
<p>Konva.JS isn't part of native JavaScript. It's just a bunch of great JavaScript that somebody else already wrote, and we have to include it in our page before we can use it. We don't, however, have to copy and paste thousands of lines of their code into ours. Instead, we can just load a file that has those thousands of lines of code. There are several places that Konva.JS can be loaded from; I chose this particular URL simply because it's one of the few that survives the school's filters.</p>
<h4>Step 2: Create an empty HTML element to hold the canvas</h4>
<p>HTML</p>
<p>&lt;script src="https://cdn.rawgit.com/konvajs/konva/0.11.1/konva.min.js"&gt;&lt;/script&gt;</p>
<p>&lt;div id='my-canvas'&gt;&lt;/div&gt;</p>
<p>There doesn't need to be anything in the div, and it doesn't even necessarily have to be a div. But it does need an ID so that Konva's JavaScript can refer to it.</p>
<h4>Step 3: Create a stage to hold everything in your drawing</h4>
<p>JavaScript</p>
<p>var stage = new Konva.Stage({<br/>container: 'my-canvas', <br/>width: 400, <br/>height: 200<br/>});</p>
<p>Make sure you remember the new keyword. Konva.Stage is a special kind of function called a constructor (because it makes a new Stage object), and it won't work without the new.<br/>The parameter you pass to the constructor is an object, so use the right syntax for an object.<br/>The container key is the ID of the HTML element where your canvas will be.<br/>The stage doesn't have to be called "stage" (you're using the var keyword, so you can decide what to call it), but "stage" makes sense for simplicity.</p>
<h4>Step 4: Create a layer and add it to the stage</h4>
<p>JavaScript</p>
<p>var stage = new Konva.Stage({<br/>container: 'my-canvas', <br/>width: 400, <br/>height: 200<br/>});</p>
<p>var layer = new Konva.Layer();<br/>stage.add(layer);</p>
<p>You can create more than one layer if you want, though there probably won't be much reason to for your projects in this class. If you do create more layers, be sure to give them different names!<br/>Again, don't forget the new keyword when you create the layer.</p>
<h4>Step 5: Create shapes and add them to the layer</h4>
<p>var redRect = new Konva.Rect({<br/>x: 20, <br/>y: 50, <br/>width: 100, <br/>height: 100, <br/>fill: 'red'<br/>});</p>
<p>layer.add(redRect);</p>
<p>x and y are the coordinates of the upper left corner of the rectangle.<br/>(0, 0) is the UPPER left corner of the stage, not the lower left.<br/>(0, 100) is 100 pixels BELOW the upper left corner.<br/>You can add as many shapes as you want in a layer.<br/>And once again, don't forget new.</p>
<h4>Step 6: Actually draw the shapes you added</h4>
<p>…</p>
<p>stage.draw();</p>
<p>Just adding the shapes to the layer does NOT make the browser draw them. To save processing power, the browser doesn't draw anything on the screen until you ask it to. Add all of the shapes you want to your layer, then call stage.draw() to finally draw everything in the stage onto the canvas.</p>
<h4>Other useful properties for a Konva.Rect</h4>
<p>stroke (string) color of the rectangle's outline<br/>strokeWidth (number) width of the rectangle's outline<br/>cornerRadius (number) rounds corners to this radius<br/>opacity (number) from 0 to 1 (0 is fully transparent, 1 is fully opaque)<br/>rotation (number) degrees of clockwise rotation</p>
<p>There are far more properties than these available. See the entire list at</p>
<p><a href="http://konvajs.github.io/api/Konva.Rect.html">http://konvajs.github.io/api/Konva.Rect.html</a> </p>
<h4>Steps Recap</h4>
<p>Load the Konva.JS library (script tag in HTML)<br/>Create an HTML element to hold the canvas<br/>Create a stage<br/>Create a layer and add it to your stage<br/>Create shapes and add them to your layer<br/>Call stage.draw() to draw those shapes onto the canvas</p>
<script src="./../static/konva.min.js"></script>
<div id="container">Konva.Circle<br/><br/>var redCircle = new Konva.Circle({<br/>x: 20,<br/>y: 20,<br/>radius: 10,<br/>fill: 'red'<br/>});<br/><br/>(x, y) are the coordinates of the center of the circle. (Remember that for a Konva.Rect, they were the upper left corner.)</div>
<div></div>
<div>Konva.Ellipse<br/><br/>var greenEllipse = new Konva.Ellipse({<br/>x: 20,<br/>y: 20,<br/>radius: {x: 10, y: 5},<br/>fill: 'green'<br/>});<br/><br/>Notice that the radius property of an ellipse is an object with keys x and y so you can make the horizontal and vertical sizes different.<br/>(x, y) is still the center.</div>
<div>
<div class="shape" title="">
<h4>What if I don't want the inside filled in?</h4>
</div>
<div class="shape" title="">
<p>var greenEllipse = new Konva.Ellipse({<br/>x: 20,<br/>y: 20,<br/>radius: {x: 10, y: 5},<br/>stroke: 'green'<br/>});</p>
<p>This will create an ellipse outlined in green, but with the inside empty since there is no fill.</p>
<p>You can use both a stroke and a fill in the same shape if you want. This lets you make a green outline filled with red, for example.</p>
<h4>Productivity Tip: Add several shapes to the layer at once</h4>
<p>var redRect = new Konva.Rect({ blah, blah, blah });<br/>var blueRect = new Konva.Rect({ blah, blah, blah });<br/>var redCircle = new Konva.Rect({ blah, blah, blah });<br/>var blueCircle = new Konva.Rect({ blah, blah, blah });</p>
<p>layer.add(redRect, blueRect, redCircle, blueCircle);</p>
<p>The order matters! Shapes you add to the layer later will cover up shapes added earlier if they overlap.</p>
<h4>Even more productivity: The clone method</h4>
<p>var leftCircle = new Konva.Circle({<br/>x: 20,<br/>y: 20,<br/>radius: 10,<br/>fill: '#ff0000'<br/>});</p>
<p>var rightCircle = leftCircle.clone({<br/>x: 60<br/>});</p>
<p>With the clone method, I only have to specify the properties that are different from the shape I'm copying.</p>
<p>Konva.Line</p>
<p>var blueV = new Konva.Line({<br/>points: [50, 50, 100, 100, 150, 50],<br/>stroke: 'blue',<br/>strokeWidth: 4 <br/>});</p>
<p>This creates a line starting at the ordered pair (50, 50), then to (100, 100), and then to (150, 50).</p>
<p>Making a Polygon</p>
<p>var blueV = new Konva.Line({<br/>points: [50, 50, 100, 100, 150, 50],<br/>stroke: 'blue',<br/>strokeWidth: 4,<br/>closed: true <br/>});</p>
<p>If you set the closed property to true, Konva automatically adds a segment from the last point back to the first point. This also allows you to add a fill if you wish.</p>
<h4>Productivity Tip: Use x and y with Konva.Line</h4>
<p>var blueV = new Konva.Line({<br/>points: [50, 50, 100, 100, 150, 50],<br/>stroke: 'blue',<br/>});</p>
<p>var theSame = new Konva.Line({<br/>x: 50,<br/>y: 50,<br/>points: [0, 0, 50, 50, 100, 0], <br/>stroke: 'blue',<br/>});</p>
<p>These two shapes are exactly the same. The second one moves the point (0,0) of the line to (50,50) of the canvas, and calculates everything else accordingly. You can use x and y to avoid recalculating every ordered pair if you decide you want everything 10 pixels to the right, for example.</p>
</div>
</div>
<script>// <![CDATA[
// first we need to create a stage
var stage = new Konva.Stage({
  container: 'container',   // id of container <div>
  width: 500,
  height: 500
});

// then create layer
var layer = new Konva.Layer();

// create our shape
var circle = new Konva.Circle({
  x: stage.getWidth() / 2,
  y: stage.getHeight() / 2,
  radius: 70,
  fill: 'red',
  stroke: 'black',
  strokeWidth: 4,
  draggable: true
});

// add the shape to the layer
layer.add(circle);

// add the layer to the stage
stage.add(layer);

// draw the image
layer.draw();
// ]]></script>
<br />Pygrouf << <a href='Pygrouf.html'>Previous</a> <a href='X3d.html'>Next</a> >> X3d</div></section></div></body></html>